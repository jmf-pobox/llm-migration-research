# I/O Contract for rpn2tex Migration

This document specifies the expected inputs and outputs for the rpn2tex implementation. It serves as a reference for validating that migrated versions (Java, Rust, Go, etc.) produce identical outputs to the original Python implementation.

## Test Cases

Generated by running the Python source implementation on 21 test inputs.

| Input | Expected Output | Notes |
|-------|-----------------|-------|
| `5 3 +` | `$5 + 3$` | Basic addition |
| `5 3 -` | `$5 - 3$` | Basic subtraction |
| `4 7 *` | `$4 \times 7$` | Basic multiplication |
| `10 2 /` | `$10 \div 2$` | Basic division |
| `2 3 ^` | ERROR: Unexpected character '^' | Exponentiation not supported |
| `5 3 + 2 *` | `$( 5 + 3 ) \times 2$` | Operator precedence with parentheses |
| `5 3 * 2 +` | `$5 \times 3 + 2$` | Operator precedence (multiplication before addition) |
| `10 2 / 5 *` | `$10 \div 2 \times 5$` | Left-associative operations |
| `5 3 - 2 -` | `$5 - 3 - 2$` | Multiple subtractions |
| `100 10 / 5 / 2 /` | `$100 \div 10 \div 5 \div 2$` | Multiple divisions |
| `1 2 + 3 + 4 +` | `$1 + 2 + 3 + 4$` | Multiple additions |
| `2 3 4 * +` | `$2 + 3 \times 4$` | Multiplication takes precedence over addition |
| `2 3 + 4 *` | `$( 2 + 3 ) \times 4$` | Parentheses around addition before multiplication |
| `2 3 4 + *` | `$2 \times ( 3 + 4 )$` | Parentheses around addition as second operand |
| `2 3 * 4 +` | `$2 \times 3 + 4$` | Multiplication before addition (no parentheses needed) |
| `2 3 ^ 4 *` | ERROR: Unexpected character '^' | Exponentiation not supported |
| `2 3 4 ^ ^` | ERROR: Unexpected character '^' | Exponentiation not supported |
| `3.14 2 *` | `$3.14 \times 2$` | Floating-point numbers |
| `1.5 0.5 +` | `$1.5 + 0.5$` | Floating-point addition |
| `1 2 + 3 4 + *` | `$( 1 + 2 ) \times ( 3 + 4 )$` | Multiple parenthesized expressions |
| `10 2 / 3 + 4 *` | `$( 10 \div 2 + 3 ) \times 4$` | Complex expression with mixed operators |

## Error Cases

The Python source implementation does not support the exponentiation operator (`^`). Attempting to use it results in a lexer error.

### Error Format

Error messages follow this format:
```
Error: Unexpected character '^'

<line> | <expression>
  |     <pointer>
```

### Inputs Producing Errors

1. **`2 3 ^`** - Exponentiation operator not recognized
   - Error: `Error: Unexpected character '^'`

2. **`2 3 ^ 4 *`** - Exponentiation operator not recognized
   - Error: `Error: Unexpected character '^'`

3. **`2 3 4 ^ ^`** - Exponentiation operator not recognized
   - Error: `Error: Unexpected character '^'`

## Supported Operations

The Python source implementation supports:

- **Addition (`+`)**: Produces `\+` in LaTeX
- **Subtraction (`-`)**: Produces `-` in LaTeX
- **Multiplication (`*`)**: Produces `\times` in LaTeX
- **Division (`/`)**: Produces `\div` in LaTeX

## Supported Operands

- **Integers**: e.g., `5`, `42`, `100`
- **Floating-point numbers**: e.g., `3.14`, `1.5`, `0.5`

## LaTeX Output Format

All outputs are wrapped in LaTeX math delimiters (`$...$`):
- Binary operations are formatted with proper spacing
- Operator precedence is respected
- Parentheses are added where necessary to preserve evaluation order
- Spaces are included around operators for readability

## Notes for Migration

1. The current Python implementation does not support exponentiation (`^`)
2. Error messages are formatted with context showing the line and column of the error
3. All LaTeX output includes the dollar sign delimiters
4. Floating-point numbers are preserved as-is in the output
5. The implementation uses RPN (Reverse Polish Notation) as input format

